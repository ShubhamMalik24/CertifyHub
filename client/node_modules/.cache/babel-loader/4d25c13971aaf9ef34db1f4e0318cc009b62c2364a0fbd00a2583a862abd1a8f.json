{"ast":null,"code":"const API_BASE = \"http://localhost:5000/api\";\nasync function apiRequest(endpoint, method = \"GET\", body = null, auth = false) {\n  const headers = {};\n\n  // Only set Content-Type to application/json if body is not FormData\n  if (!(body instanceof FormData)) {\n    headers[\"Content-Type\"] = \"application/json\";\n  }\n  if (auth) {\n    const token = localStorage.getItem(\"token\");\n    if (token) {\n      headers[\"Authorization\"] = `Bearer ${token}`;\n    }\n  }\n  let res;\n  try {\n    res = await fetch(`${API_BASE}${endpoint}`, {\n      method,\n      headers,\n      body: body instanceof FormData ? body : body ? JSON.stringify(body) : null,\n      credentials: 'include'\n    });\n  } catch (networkError) {\n    throw new Error('Network error: Unable to connect to server. Please check your connection.');\n  }\n  let data;\n  try {\n    const contentType = res.headers.get('content-type');\n    if (contentType && contentType.includes('application/json')) {\n      data = await res.json();\n    } else {\n      // If response is not JSON, read as text for error message\n      const text = await res.text();\n      throw new Error(`Server error (${res.status}): ${text || res.statusText}`);\n    }\n  } catch (parseError) {\n    if (parseError instanceof Error && parseError.message.startsWith('Server error')) {\n      throw parseError;\n    }\n    throw new Error(`Failed to parse server response: ${res.status} ${res.statusText}`);\n  }\n  if (!res.ok) {\n    // Handle standardized error responses\n    throw new Error(data.message || `API Error: ${res.status}`);\n  }\n\n  // Handle standardized success responses\n  if (data.success !== undefined) {\n    return data.data || data; // Return data field for new format, full response for old format\n  }\n  return data; // Return as-is for non-standardized responses\n}\nexport default apiRequest;","map":{"version":3,"names":["API_BASE","apiRequest","endpoint","method","body","auth","headers","FormData","token","localStorage","getItem","res","fetch","JSON","stringify","credentials","networkError","Error","data","contentType","get","includes","json","text","status","statusText","parseError","message","startsWith","ok","success","undefined"],"sources":["C:/Users/DELL/Desktop/CertifyHub/client/src/utils/api.js"],"sourcesContent":["const API_BASE = \"http://localhost:5000/api\";\n\nasync function apiRequest(endpoint, method = \"GET\", body = null, auth = false) {\n  const headers = {};\n\n  // Only set Content-Type to application/json if body is not FormData\n  if (!(body instanceof FormData)) {\n    headers[\"Content-Type\"] = \"application/json\";\n  }\n\n  if (auth) {\n    const token = localStorage.getItem(\"token\");\n    if (token) {\n      headers[\"Authorization\"] = `Bearer ${token}`;\n    }\n  }\n\n  let res;\n  try {\n    res = await fetch(`${API_BASE}${endpoint}`, {\n      method,\n      headers,\n      body: body instanceof FormData ? body : (body ? JSON.stringify(body) : null),\n      credentials: 'include',\n    });\n  } catch (networkError) {\n    throw new Error('Network error: Unable to connect to server. Please check your connection.');\n  }\n\n  let data;\n  try {\n    const contentType = res.headers.get('content-type');\n    if (contentType && contentType.includes('application/json')) {\n      data = await res.json();\n    } else {\n      // If response is not JSON, read as text for error message\n      const text = await res.text();\n      throw new Error(`Server error (${res.status}): ${text || res.statusText}`);\n    }\n  } catch (parseError) {\n    if (parseError instanceof Error && parseError.message.startsWith('Server error')) {\n      throw parseError;\n    }\n    throw new Error(`Failed to parse server response: ${res.status} ${res.statusText}`);\n  }\n\n  if (!res.ok) {\n    // Handle standardized error responses\n    throw new Error(data.message || `API Error: ${res.status}`);\n  }\n\n  // Handle standardized success responses\n  if (data.success !== undefined) {\n    return data.data || data; // Return data field for new format, full response for old format\n  }\n\n  return data; // Return as-is for non-standardized responses\n}\n\nexport default apiRequest;\n"],"mappings":"AAAA,MAAMA,QAAQ,GAAG,2BAA2B;AAE5C,eAAeC,UAAUA,CAACC,QAAQ,EAAEC,MAAM,GAAG,KAAK,EAAEC,IAAI,GAAG,IAAI,EAAEC,IAAI,GAAG,KAAK,EAAE;EAC7E,MAAMC,OAAO,GAAG,CAAC,CAAC;;EAElB;EACA,IAAI,EAAEF,IAAI,YAAYG,QAAQ,CAAC,EAAE;IAC/BD,OAAO,CAAC,cAAc,CAAC,GAAG,kBAAkB;EAC9C;EAEA,IAAID,IAAI,EAAE;IACR,MAAMG,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;IAC3C,IAAIF,KAAK,EAAE;MACTF,OAAO,CAAC,eAAe,CAAC,GAAG,UAAUE,KAAK,EAAE;IAC9C;EACF;EAEA,IAAIG,GAAG;EACP,IAAI;IACFA,GAAG,GAAG,MAAMC,KAAK,CAAC,GAAGZ,QAAQ,GAAGE,QAAQ,EAAE,EAAE;MAC1CC,MAAM;MACNG,OAAO;MACPF,IAAI,EAAEA,IAAI,YAAYG,QAAQ,GAAGH,IAAI,GAAIA,IAAI,GAAGS,IAAI,CAACC,SAAS,CAACV,IAAI,CAAC,GAAG,IAAK;MAC5EW,WAAW,EAAE;IACf,CAAC,CAAC;EACJ,CAAC,CAAC,OAAOC,YAAY,EAAE;IACrB,MAAM,IAAIC,KAAK,CAAC,2EAA2E,CAAC;EAC9F;EAEA,IAAIC,IAAI;EACR,IAAI;IACF,MAAMC,WAAW,GAAGR,GAAG,CAACL,OAAO,CAACc,GAAG,CAAC,cAAc,CAAC;IACnD,IAAID,WAAW,IAAIA,WAAW,CAACE,QAAQ,CAAC,kBAAkB,CAAC,EAAE;MAC3DH,IAAI,GAAG,MAAMP,GAAG,CAACW,IAAI,CAAC,CAAC;IACzB,CAAC,MAAM;MACL;MACA,MAAMC,IAAI,GAAG,MAAMZ,GAAG,CAACY,IAAI,CAAC,CAAC;MAC7B,MAAM,IAAIN,KAAK,CAAC,iBAAiBN,GAAG,CAACa,MAAM,MAAMD,IAAI,IAAIZ,GAAG,CAACc,UAAU,EAAE,CAAC;IAC5E;EACF,CAAC,CAAC,OAAOC,UAAU,EAAE;IACnB,IAAIA,UAAU,YAAYT,KAAK,IAAIS,UAAU,CAACC,OAAO,CAACC,UAAU,CAAC,cAAc,CAAC,EAAE;MAChF,MAAMF,UAAU;IAClB;IACA,MAAM,IAAIT,KAAK,CAAC,oCAAoCN,GAAG,CAACa,MAAM,IAAIb,GAAG,CAACc,UAAU,EAAE,CAAC;EACrF;EAEA,IAAI,CAACd,GAAG,CAACkB,EAAE,EAAE;IACX;IACA,MAAM,IAAIZ,KAAK,CAACC,IAAI,CAACS,OAAO,IAAI,cAAchB,GAAG,CAACa,MAAM,EAAE,CAAC;EAC7D;;EAEA;EACA,IAAIN,IAAI,CAACY,OAAO,KAAKC,SAAS,EAAE;IAC9B,OAAOb,IAAI,CAACA,IAAI,IAAIA,IAAI,CAAC,CAAC;EAC5B;EAEA,OAAOA,IAAI,CAAC,CAAC;AACf;AAEA,eAAejB,UAAU","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}