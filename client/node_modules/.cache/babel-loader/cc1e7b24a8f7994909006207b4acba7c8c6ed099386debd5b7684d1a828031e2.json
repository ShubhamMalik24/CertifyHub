{"ast":null,"code":"import{useState,useEffect}from'react';import apiRequest from'../utils/api';const useAuth=()=>{const[user,setUser]=useState(null);useEffect(()=>{const checkAuth=async()=>{const token=localStorage.getItem('token');if(!token){setUser(null);return;}try{const userData=await apiRequest('/auth/me','GET',null,true);setUser(userData);}catch(error){console.error('Auth check failed:',error);localStorage.removeItem('token');setUser(null);}};checkAuth();},[]);const logout=()=>{localStorage.removeItem('token');setUser(null);window.location.href='/';};return{user,logout};};export default useAuth;","map":{"version":3,"names":["useState","useEffect","apiRequest","useAuth","user","setUser","checkAuth","token","localStorage","getItem","userData","error","console","removeItem","logout","window","location","href"],"sources":["/Users/mohit/Downloads/CertifyHub/client/src/hooks/useAuth.js"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport apiRequest from '../utils/api';\n\nconst useAuth = () => {\n  const [user, setUser] = useState(null);\n\n  useEffect(() => {\n    const checkAuth = async () => {\n      const token = localStorage.getItem('token');\n      if (!token) {\n        setUser(null);\n        return;\n      }\n      try {\n        const userData = await apiRequest('/auth/me', 'GET', null, true);\n        setUser(userData);\n      } catch (error) {\n        console.error('Auth check failed:', error);\n        localStorage.removeItem('token');\n        setUser(null);\n      }\n    };\n    checkAuth();\n  }, []);\n\n  const logout = () => {\n    localStorage.removeItem('token');\n    setUser(null);\n    window.location.href = '/';\n  };\n\n  return { user, logout };\n};\n\nexport default useAuth;\n"],"mappings":"AAAA,OAASA,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAC3C,MAAO,CAAAC,UAAU,KAAM,cAAc,CAErC,KAAM,CAAAC,OAAO,CAAGA,CAAA,GAAM,CACpB,KAAM,CAACC,IAAI,CAAEC,OAAO,CAAC,CAAGL,QAAQ,CAAC,IAAI,CAAC,CAEtCC,SAAS,CAAC,IAAM,CACd,KAAM,CAAAK,SAAS,CAAG,KAAAA,CAAA,GAAY,CAC5B,KAAM,CAAAC,KAAK,CAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CAC3C,GAAI,CAACF,KAAK,CAAE,CACVF,OAAO,CAAC,IAAI,CAAC,CACb,OACF,CACA,GAAI,CACF,KAAM,CAAAK,QAAQ,CAAG,KAAM,CAAAR,UAAU,CAAC,UAAU,CAAE,KAAK,CAAE,IAAI,CAAE,IAAI,CAAC,CAChEG,OAAO,CAACK,QAAQ,CAAC,CACnB,CAAE,MAAOC,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,oBAAoB,CAAEA,KAAK,CAAC,CAC1CH,YAAY,CAACK,UAAU,CAAC,OAAO,CAAC,CAChCR,OAAO,CAAC,IAAI,CAAC,CACf,CACF,CAAC,CACDC,SAAS,CAAC,CAAC,CACb,CAAC,CAAE,EAAE,CAAC,CAEN,KAAM,CAAAQ,MAAM,CAAGA,CAAA,GAAM,CACnBN,YAAY,CAACK,UAAU,CAAC,OAAO,CAAC,CAChCR,OAAO,CAAC,IAAI,CAAC,CACbU,MAAM,CAACC,QAAQ,CAACC,IAAI,CAAG,GAAG,CAC5B,CAAC,CAED,MAAO,CAAEb,IAAI,CAAEU,MAAO,CAAC,CACzB,CAAC,CAED,cAAe,CAAAX,OAAO","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}